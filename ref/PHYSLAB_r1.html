<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>仮想物理実験室の創造（r1）</title>
<style>
#canvas-frame {
	width : 500px;
	height: 500px;
}
</style>
<!-- 外部JavaScriptファイルの読み込み -->
<script src="../javascript/three_r66.js"></script>             <!-- Three.js用ライブラリ -->
<script src="../javascript/TrackballControls_r66.js"></script> <!-- トラックボールコントロール用ライブラリ -->
<script src="../javascript/Stats.js"></script>                 <!-- FPS表示ライブラリ -->
<script src="../javascript/physLab_r1.js"></script>
<script src="../javascript/physObject_r1.js"></script>
<script>
////////////////////////////////////////////////////////////////////
// windowイベントの定義
////////////////////////////////////////////////////////////////////
window.addEventListener("load", function () {

    //仮想物理実験室オブジェクトの生成
	PHYSICS.physLab = new PHYSICS.PhysLab({

		//必須パラメータ
		frameID : "canvas-frame",        //額縁を表す要素のid名

		//ボタン関連
		playButtonID : "play",          //計算開始ボタンの表す要素のid名
		resetButtonID : "reset",         //リセットボタンの表す要素のid名
		pictureID : "picture",           //画面キャプチャボタンを表す要素のid名  

		//マウスドラック関連
		draggable: true,                 //マウスドラック利用の有無
		allowDrag : true,                //マウスドラックの可否

		//数値計算パラメータ
		g: 9.8,                          //重力加速度
		dt: 0.001,                       //1ステップあたりの時間間隔
		skipRendering: 40,               //描画間引回数

		//レンダラー関連パラメータ
		renderer : {
			clearColor : 0xE1FCFF,       //クリアーカラー（背景色）
		},
		//トラックボール関連パラメータ
		trackball : {
			enabled : true,              //トラックボール利用の有無
		},
		//カメラ関連パラメータ
		camera: {                        
			type : "Perspective",        //カメラの種類 （ Perspective | Orthographic）
			position: {x:20, y:0, z:10}, //カメラの位置
			target: {x:0, y:0, z:2},     //カメラの視野中心座標
		},
		//光源関連パラメータ
		light: {                         
			type :"Directional",         //光源の種類 （ Directional | Spot | Point）
			position: {x:0, y:0, z:15},  //光源位置
			target: {x:0, y:0, z:0},     //光源の向き
			color: 0xFFFFFF,             //光源色
			ambient: 0x999999,           //環境光源の光源色
		},
		//影関連パラメータ
		shadow: {
			shadowMapEnabled:    true,   //シャドーマップの利用
			shadowCameraVisible: false,  //シャドーマップの可視化
		},

		//フラグ関連
		locusFlag : true,                //軌跡の表示 (true | false | "pause")
		velocityVectorFlag : "pause",    //速度ベクトルの表示 (true | false | "pause")
		boundingBoxFlag : "dragg",       //バウンディングボックスのの表示 (true | false | "dragg")
	});

	//球オブジェクトの生成
	PHYSICS.physLab.objects.push(
		new PHYSICS.Sphere({
			//運動関連
			dynamic: true,          //運動の有無
			recordData : true,      //運動記録の有無
			skipRecord : 50,        //運動記録の間引回数

			//マウスドラック関連
			draggable: true,       //マウスドラックの有無
			allowDrag : true,      //マウスドラックの可否

			//物理量パラメータ
			mass: 1,                //質量
			radius: 1,              //球の半径

			//初期状態パラメータ
			r: {x: 0, y: 0, z: 2},     //位置ベクトル
			v: {x: 0, y: -5, z: 12},   //速度ベクトル

			//材質オブジェクト関連パラメータ
			material : {
				color : 0xFF0000,   //反射色
				ambient : 0x990000, //環境色
				castShadow : true   //影の描画
			},
			//形状オブジェクト関連パラメータ
			geometry : {},

			//軌跡関連パラメータ
			locus : {
				enabled : true,     //利用の有無
				visible : true,     //軌跡の表示の有無
				color :  0xFF00FF,  //発光色
				maxNum : 1000,      //軌跡ベクトルの最大配列数
			},
			//速度ベクトル関連パラメータ
			velocityVector : {
				enabled : true,     //利用の有無
				visible : true,     //表示の有無
				color : 0xFF00FF,   //発光色
				scale : 0.5,        //矢印のスケール
			},
			//バウンディングボックス関連パラメータ
			boundingBox : {
				visible : true,     //バウンディングボックスの表示
			}
		})
	 );

	//床オブジェクトの生成
	PHYSICS.physLab.objects.push( 
		new PHYSICS.Floor({ 
			draggable: false,      //マウスドラック可能
			material : {
				type : "Lambert",      //材質の種類
				receiveShadow : true,  //影の描画
			}
	 	})
	 )

	//軸オブジェクトの生成と表示
	PHYSICS.physLab.objects.push( 
		new PHYSICS.Axis({
			draggable: true,       //マウスドラックの有無
			allowDrag : true,      //マウスドラックの可否
			r :{ x: -9, y: -9, z: 3},   //位置ベクトル
		})
	);

	//仮想物理実験室のスタートメソッドの実行
	PHYSICS.physLab.startLab();
});

</script>
</head>
<body>
<div id="canvas-frame"></div>
<button id="play"></button><button id="reset"></button>
<a href="" id="picture"></a>
</body>
</html>
